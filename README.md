isf reader and writer
=====================

This script is intended to convert .isf binary files generated by Tektronix MDO and MSO series oscilloscopes to simple text csv files with ASCii data.
The script can also be used to save numpy ndarray data in ISF files with Y format or new XY format.

##### Key features:
* Supports binary data encoding only
* Supported binary data formats:
  * standard Y (YT) format, in which binary data is a sequence of Y values and X values are calculated
  * envelope, in which binary data is the sequence of Ymin, Ymax value pairs and X values are calculated
  * XY (new, non-standard format), in which the first half of binary data is the sequence of X values and the second is the sequence of Y values. It can be used to store curve data points with uneven time intervals.
* Outputs comma delimited ASCii data (one data point per line)

#### Simple usage:

As converter from ISF to CSV:
```shell script
python isfreader.py inputfile.isf > outpufile.csv
```

As python module (read ISF):
```python
from isfconverter import isfreader as isf

x_data, y_data, head = isf.read_isf("data_file.isf")
# x_data: numpy.ndarray with the shape (N,) where N - number of points
# y_data: numpy.ndarray with the shape (N,) if PT_FMT == 'Y' (normal mode)
#         OR with the shape (2N,) if PT_FMT == 'ENV' (envelope mode)
# x_data and y_data must have the same dtype and may contain nan values
#
# head: dictionary with data info (param_name:param_val pairs)
```

As python module (write ISF):
```python
from isfconverter import isfreader as isf

isf.write_isf(arr_x, arr_y, filename, verbose)
# arr_x: numpy.ndarray with the shape (N,) where N - number of points
# arr_y: numpy.ndarray with the shape (N,) where N - number of points
# filename: the fullpath to the output file
# verbose: print messages during process or not (default false)
```

-------------------------------------------------------------------------

isfconverter
============

This script adds command line interface (CLI) to the isfreader.

##### Usage: 
```
python isfconverter.py -f filename
python isfconverter.py -d path/to/input/files
python isfconverter.py -d path/to/input/files -o path/to/output/dir
python isfconverter.py --files file_1.isf file_2.isf --save_as file_1.csv file_2.csv   
python isfconverter.py @file_with_options
```

##### Optional arguments:


`-h, --help`  show this help message and exit 

`-d DIR, --directory DIR`  specify the directory containing ISF data files. Default == the folder containing this code. 
                    
`-f FILE [FILE ...], --files FILE [FILE ...]` specify one or more (space separated) input ISF file names after the flag.
                    
`--head, --include-header` adds header lines to the output files.

`-o DIR, --output-dir DIR` specify the output directory.
                    
`-s FILE [FILE ...], --save_as FILE [FILE ...]` specify one or more (space separated) output file names after the flag. The number of the output file names must be equal to the number of the input file names.
                    
`-v, --verbose` shows more information during the process.


-------------------------------------------------------------------------

#### Author: 

Konstantin Shpakov, august 2019.



#### Based on:

1) [**isfread-py** by Gustavo Pasquevich, Universidad Nacional de La Plata - Argentina](https://github.com/gpasquev/isfread-py)

2) [Tektronix MDO4000C, MDO4000B, MDO4000, MSO4000B, DPO4000B and MDO3000 Series Oscilloscopes Programmer Manual. Revision A, 077-0510-09](https://www.tek.com/oscilloscope/mso4000-dpo4000-manual/mdo4000c-mdo4000b-mdo4000-mso4000b-dpo4000b-and-mdo3000-0)

-------------------------------------------------------------------------

##### Keywords

Tektronix, isf, csv, isfreader, python
